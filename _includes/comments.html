<!-- Sistema de Comentarios An√≥nimos -->
<section class="comments-section" id="comments">
  <h3 class="comments-title">üí¨ Comentarios</h3>
  
  <!-- Formulario de nuevo comentario -->
  <form class="comment-form" id="comment-form">
    <div class="form-group">
      <label for="comment-name">Nombre (opcional)</label>
      <input 
        type="text" 
        id="comment-name" 
        name="name" 
        placeholder="An√≥nimo"
        maxlength="50"
      >
    </div>
    
    <div class="form-group">
      <label for="comment-text">Comentario *</label>
      <textarea 
        id="comment-text" 
        name="comment" 
        placeholder="Escribe tu comentario..."
        rows="4"
        required
        maxlength="1000"
      ></textarea>
      <span class="char-count"><span id="char-count">0</span>/1000</span>
    </div>
    
    <button type="submit" class="btn btn-primary">
      Enviar comentario
    </button>
    
    <p class="form-note">
      Los comentarios son moderados. S√© respetuoso.
    </p>
  </form>
  
  <!-- Lista de comentarios -->
  <div class="comments-list" id="comments-list">
    <!-- Los comentarios se cargar√≠an aqu√≠ -->
    <div class="no-comments">
      <p>S√© el primero en comentar.</p>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('comment-form');
  const textarea = document.getElementById('comment-text');
  const charCount = document.getElementById('char-count');
  
  // Contador de caracteres
  textarea.addEventListener('input', function() {
    charCount.textContent = this.value.length;
  });
  
  // Manejar env√≠o del formulario
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('comment-name').value.trim() || 'An√≥nimo';
    const comment = textarea.value.trim();
    
    if (!comment) return;
    
    // Aqu√≠ se integrar√≠a con un backend (Staticman, Formspree, etc.)
    // Por ahora mostramos un mensaje
    const commentsList = document.getElementById('comments-list');
    const noComments = commentsList.querySelector('.no-comments');
    if (noComments) noComments.remove();
    
    const newComment = document.createElement('div');
    newComment.className = 'comment';
    newComment.innerHTML = `
      <div class="comment-header">
        <span class="comment-author">${escapeHtml(name)}</span>
        <time class="comment-date">${new Date().toLocaleDateString('es-ES')}</time>
      </div>
      <div class="comment-body">
        <p>${escapeHtml(comment)}</p>
      </div>
    `;
    
    commentsList.insertBefore(newComment, commentsList.firstChild);
    
    // Limpiar formulario
    form.reset();
    charCount.textContent = '0';
    
    // Mostrar confirmaci√≥n
    alert('¬°Gracias por tu comentario! (Nota: En un sitio est√°tico real, esto requerir√≠a un servicio backend como Staticman)');
  });
  
  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
});
</script>
